2026-01-08 21:52:02 - INFO - ============================================================
2026-01-08 21:52:02 - INFO - Starting AWS Infrastructure Deployment
2026-01-08 21:52:02 - INFO - ============================================================
2026-01-08 21:52:02 - INFO - Project: planning
2026-01-08 21:52:02 - INFO - Region: us-west-2
2026-01-08 21:52:02 - INFO - Account ID: 262976740991
2026-01-08 21:52:02 - INFO - Bucket Name: storage-for-planning-262976740991-us-west-2
2026-01-08 21:52:02 - INFO - ============================================================
2026-01-08 21:52:02 - INFO - [1/10] Creating S3 bucket: storage-for-planning-262976740991-us-west-2
2026-01-08 21:52:04 - INFO - ✓ S3 bucket created successfully: storage-for-planning-262976740991-us-west-2
2026-01-08 21:52:04 - INFO - S3 bucket created...
2026-01-08 21:52:04 - INFO - [2/10] Creating Knowledge Base IAM role
2026-01-08 21:52:05 - INFO - ✓ IAM role created: role-knowledge-base-for-planning-us-west-2
2026-01-08 21:52:06 - INFO - [2/10] Creating Agent IAM role
2026-01-08 21:52:07 - INFO - ✓ IAM role created: role-agent-for-planning-us-west-2
2026-01-08 21:52:08 - INFO - [2/10] Creating EC2 IAM role
2026-01-08 21:52:09 - INFO - ✓ IAM role created: role-ec2-for-planning-us-west-2
2026-01-08 21:52:13 - INFO - IAM roles created...
2026-01-08 21:52:13 - INFO - [3/10] Creating Secrets Manager secrets
2026-01-08 21:52:13 - INFO - Please enter API keys when prompted (press Enter to skip and leave empty):
2026-01-08 21:52:14 - INFO - Enter credential of openweathermap-planning (Weather API Key - OpenWeatherMap):
2026-01-08 21:54:09 - INFO -   ✓ Created secret: openweathermap-planning
2026-01-08 21:54:09 - INFO - Enter credential of tavilyapikey-planning (Tavily API Key):
2026-01-08 21:54:16 - INFO -   ✓ Created secret: tavilyapikey-planning
2026-01-08 21:54:16 - INFO - ✓ Created 2 secrets
2026-01-08 21:54:16 - INFO - Secrets created...
2026-01-08 21:54:16 - INFO - [4/10] Creating OpenSearch Serverless collection
2026-01-08 21:54:23 - INFO -   Waiting for collection to be active (this may take a few minutes)...
2026-01-08 21:55:24 - INFO - ✓ OpenSearch collection created: planning
2026-01-08 21:55:24 - INFO -   Endpoint: https://n1h1cy1fd4j7cltaxjqb.us-west-2.aoss.amazonaws.com
2026-01-08 21:55:24 - INFO - OpenSearch collection created...
2026-01-08 21:55:24 - INFO - [4.5/10] Creating Knowledge Base with OpenSearch collection
2026-01-08 21:55:24 - INFO -   Creating vector index in OpenSearch collection...
2026-01-08 21:55:24 - INFO - Found credentials in shared credentials file: ~/.aws/credentials
2026-01-08 21:55:25 - INFO -   ✓ Vector index 'planning' created successfully
2026-01-08 21:55:25 - INFO -   Waiting for index to be ready...
2026-01-08 21:55:55 - INFO -   Checking if Knowledge Base already exists...
2026-01-08 21:55:56 - INFO -   Knowledge Base does not exist. Creating new one...
2026-01-08 21:55:57 - INFO - ✓ Knowledge Base created: HONVGW8J98
2026-01-08 21:55:57 - INFO -   Waiting for Knowledge Base to be active...
2026-01-08 21:56:07 - INFO -   Knowledge Base is now active
2026-01-08 21:56:07 - INFO -   Creating data source...
2026-01-08 21:56:08 - INFO -   ✓ Data source created: YLWOUMHCJO
2026-01-08 21:56:08 - INFO - Knowledge base created...
2026-01-08 21:56:08 - INFO - [5/10] Creating VPC and networking resources
2026-01-08 21:56:08 - INFO - Using CIDR block: 172.17.0.0/16
2026-01-08 21:56:09 - WARNING - VPC already exists: vpc-09d16953e491724e9
2026-01-08 21:56:09 - INFO -   No private subnets found. Creating private subnets for EC2 deployment...
2026-01-08 21:56:09 - WARNING - Error processing existing VPC vpc-09d16953e491724e9: Cannot create private subnets without public subnets for NAT Gateway. Please ensure your VPC has at least one public subnet.
2026-01-08 21:56:09 - WARNING -   WARNING: No public subnets found in VPC vpc-09d16953e491724e9
2026-01-08 21:56:09 - INFO -   Attempting to create public subnets...
2026-01-08 21:56:10 - INFO -   No Internet Gateway found. Creating Internet Gateway...
2026-01-08 21:56:11 - INFO -   Created and attached Internet Gateway: igw-0a60a88e61cd35d77
2026-01-08 21:56:12 - INFO -   Created public route table: rtb-09d2c1460abb3fe7d
2026-01-08 21:56:12 - INFO -   Created public subnet: subnet-000db6fbe8d15fa40 in us-west-2a with CIDR 10.24.0.0/24
2026-01-08 21:56:13 - INFO -   Created public subnet: subnet-036949d26067a8c48 in us-west-2b with CIDR 10.24.1.0/24
2026-01-08 21:56:14 - INFO -   ✓ Successfully created 2 public subnet(s)
2026-01-08 21:56:14 - WARNING -   WARNING: No private subnets found in VPC vpc-09d16953e491724e9
2026-01-08 21:56:14 - INFO -   Attempting to create private subnets...
2026-01-08 21:56:14 - INFO -   No private subnets found. Creating private subnets for EC2 deployment...
2026-01-08 21:56:15 - INFO -   Allocating Elastic IP for NAT Gateway...
2026-01-08 21:56:16 - INFO -   Creating NAT Gateway (this may take a few minutes)...
2026-01-08 21:56:16 - INFO -   Waiting for NAT Gateway to be available...
2026-01-08 21:58:10 - INFO -   Created private route table: rtb-090b8e68a38d55b8a
2026-01-08 21:58:10 - INFO -   Created private subnet: subnet-0cb12f1bf2f93b604 in us-west-2a with CIDR 10.24.2.0/24
2026-01-08 21:58:11 - INFO -   Created private subnet: subnet-0e9d454ae632b47d2 in us-west-2b with CIDR 10.24.3.0/24
2026-01-08 21:58:12 - INFO -   ✓ Created 2 private subnet(s) for EC2 deployment
2026-01-08 21:58:13 - INFO -   ✓ Successfully created 2 private subnet(s)
2026-01-08 21:58:13 - INFO - VPC created...
2026-01-08 21:58:13 - INFO - [6/10] Creating Application Load Balancer
2026-01-08 21:58:15 - INFO - ✓ ALB created: alb-for-planning-1257585157.us-west-2.elb.amazonaws.com
2026-01-08 21:58:15 - INFO - ALB created...
2026-01-08 21:58:15 - INFO - [7/10] Creating CloudFront distribution
2026-01-08 21:58:18 - INFO - ✓ CloudFront distribution created: d2027k1ruwqpki.cloudfront.net
2026-01-08 21:58:18 - INFO -   Distribution ID: E39I4N7OMKDJGB
2026-01-08 21:58:18 - WARNING -   Note: CloudFront distribution may take 15-20 minutes to deploy
2026-01-08 21:58:18 - INFO - CloudFront distribution created...
2026-01-08 21:58:18 - INFO - [8/10] Creating EC2 instance
2026-01-08 21:58:22 - INFO - ✓ EC2 instance created: i-0fd18dd94902d7264
2026-01-08 21:58:22 - INFO -   Instance type: t3.medium
2026-01-08 21:58:22 - INFO -   Deployed in private subnet: subnet-0cb12f1bf2f93b604
2026-01-08 21:58:22 - INFO -   User data script configured for application deployment
2026-01-08 21:58:22 - INFO - EC2 instance created...
2026-01-08 21:58:22 - INFO - [9/10] Creating ALB target group and listener
2026-01-08 21:58:39 - INFO -   ✓ Registered EC2 instance i-0fd18dd94902d7264 to target group
2026-01-08 21:58:40 - INFO -   ✓ Created rule for custom header
2026-01-08 21:58:40 - INFO - ✓ ALB target group and listener created
2026-01-08 21:58:40 - INFO -   Target group: arn:aws:elasticloadbalancing:us-west-2:262976740991:targetgroup/TG-for-planning/88d04ff0c6600ac2
2026-01-08 21:58:40 - INFO -   Listener: arn:aws:elasticloadbalancing:us-west-2:262976740991:listener/app/alb-for-planning/7fc5510388fe32dd/82ac8c199f93655e
2026-01-08 21:58:40 - INFO - ALB target group and listener created...
2026-01-08 21:58:40 - INFO - Checking if application is ready: d2027k1ruwqpki.cloudfront.net
2026-01-08 21:58:40 - INFO - [10/10] Checking if application is ready at https://d2027k1ruwqpki.cloudfront.net
2026-01-08 21:58:40 - INFO -   Maximum 120 attempts, 10 seconds between attempts (up to 20 minutes)
2026-01-08 21:58:40 - INFO -   In progress... [1/120] - Connection attempt
2026-01-08 21:59:10 - INFO -   In progress... [4/120] - Connection attempt
2026-01-08 21:59:40 - INFO -   In progress... [7/120] - Connection attempt
2026-01-08 22:00:11 - INFO -   In progress... [10/120] - HTTP 502 response
2026-01-08 22:00:42 - INFO -   In progress... [13/120] - HTTP 502 response
2026-01-08 22:01:02 - INFO - ✓ Application is ready! Status code: 200
2026-01-08 22:01:02 - INFO -   Total attempts: 15/120, elapsed time: 2.4 minutes
2026-01-08 22:01:02 - INFO - 
2026-01-08 22:01:02 - INFO - ============================================================
2026-01-08 22:01:02 - INFO - Infrastructure Deployment Completed Successfully!
2026-01-08 22:01:02 - INFO - ============================================================
2026-01-08 22:01:02 - INFO - Summary:
2026-01-08 22:01:02 - INFO -   S3 Bucket: storage-for-planning-262976740991-us-west-2
2026-01-08 22:01:02 - INFO -   VPC ID: vpc-09d16953e491724e9
2026-01-08 22:01:02 - INFO -   Public Subnets: subnet-000db6fbe8d15fa40, subnet-036949d26067a8c48
2026-01-08 22:01:02 - INFO -   Private Subnets: subnet-0cb12f1bf2f93b604, subnet-0e9d454ae632b47d2
2026-01-08 22:01:02 - INFO -   ALB DNS: http://alb-for-planning-1257585157.us-west-2.elb.amazonaws.com/
2026-01-08 22:01:02 - INFO -   CloudFront Domain: https://d2027k1ruwqpki.cloudfront.net
2026-01-08 22:01:02 - INFO -   EC2 Instance ID: i-0fd18dd94902d7264 (deployed in private subnet)
2026-01-08 22:01:02 - INFO -   OpenSearch Endpoint: https://n1h1cy1fd4j7cltaxjqb.us-west-2.aoss.amazonaws.com
2026-01-08 22:01:02 - INFO -   Knowledge Base ID: HONVGW8J98
2026-01-08 22:01:02 - INFO -   Knowledge Base Role: arn:aws:iam::262976740991:role/role-knowledge-base-for-planning-us-west-2
2026-01-08 22:01:02 - INFO - 
2026-01-08 22:01:02 - INFO - Total deployment time: 9.00 minutes
2026-01-08 22:01:02 - INFO - ============================================================
2026-01-08 22:01:02 - INFO - Note: CloudFront distribution may take 15-20 minutes to fully deploy
2026-01-08 22:01:02 - INFO - Note: EC2 instance user data script will install and start the application
2026-01-08 22:01:02 - INFO - ============================================================
2026-01-08 22:01:02 - INFO - OpenSearch Collection ARN: arn:aws:aoss:us-west-2:262976740991:collection/n1h1cy1fd4j7cltaxjqb
2026-01-08 22:01:02 - INFO - OpenSearch Collection Endpoint: https://n1h1cy1fd4j7cltaxjqb.us-west-2.aoss.amazonaws.com
2026-01-08 22:01:02 - INFO - ✓ Updated application/config.json
2026-01-08 22:01:02 - INFO - ============================================================
2026-01-08 22:01:02 - INFO - 
2026-01-08 22:01:02 - INFO - ============================================================
2026-01-08 22:01:02 - INFO -   IMPORTANT: CloudFront Domain Address
2026-01-08 22:01:02 - INFO - ============================================================
2026-01-08 22:01:02 - INFO -  CloudFront URL: https://d2027k1ruwqpki.cloudfront.net
2026-01-08 22:01:02 - INFO - 
2026-01-08 22:01:02 - INFO - Note: CloudFront distribution and agent application on EC2 instance may take 15-20 minutes to fully deploy
2026-01-08 22:01:02 - INFO -       Once deployed, you can access your application at the URL above
2026-01-08 22:01:02 - INFO - ============================================================
2026-01-08 22:01:02 - INFO - 
